<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hangman - Redo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Hangman - Australian Animals</h1>
    <div>
        <h3>Press ENTER to start</h3>
        <h2>Current Word</h2>
        <h3 id="current-word"></h3>
    </div>
    <h4>guesses remaining</h4>
    <h4 id="attempts"></h4>
    <h5>letters already guessed</h5>
    <p id="letters-guessed"></p>

    <script type="text/javascript">
    
    //make the GLOBAL variables
    //create the global array of animal words to randomly select
    var animals = [
            "emu",
            "kookaburra",
            "kangaroo",
            "wallaby",
            "koala",
            "platypus",
            "echidna",
            "pademelon"
        ];

    //empty arrays for LETTERS GUESSED and THE CURRENT WORD
    var lettersGuessed = [];

    var guessingWord = [];

    //variable for remaining attempts
    var remainingAttempts = 10;

    //variable for the current word's index - EMPTY
    var currentWordIndex;

   //function to clear variables and START game
   function startGame() {
       //use a random number to assign a value to the currentWordIndex using the length of the animals array
       currentWordIndex = Math.floor(Math.random() * (animals.length));

       //clear the other arrays
       lettersGuessed = [];

       guessingWord = [];

       //make the guessingWord and clear the letters
       for(var i = 0; i < animals[currentWordIndex].length; i++) {
           guessingWord.push(" _ ");
       }
       //CALL FUNCTION TO RESET DISPLAY AND SHOW WORD BLANKS
       // TO DO

   }

   function resetDisplay() {
       //display the current word with blanks
       document.getElementById("current-word").innerText = "";
       for(var j = 0; j < guessingWord.length; j++) {
           document.getElementById("current-word").innerText += guessingWord[j];
       }
       document.getElementById("attempts").innerText = remainingAttempts;
       document.getElementById("letters-guessed").innerText = lettersGuessed.join(" ");
       //reset for when guesses are empty ?
    //    if(remainingAttempts <= 0)
   }

    //FUNCTION FOR UPDATING THE HANGMAN IMAGE if I choose to include it - you would need to add a MAX TRIES variable if so
    // Updates the image depending on how many guesses
    // function updateHangmanImage() {
    //     document.getElementById("hangmanImage").src = "assets/images/" + (maxTries - remainingGuesses) + ".png";
    // };

    function makeGuess(letter) {
        //ADD THIS BIT OF CODE ELSEWHERE
        // if(remainingAttempts > 0) {

        // }
        if(lettersGuessed.indexOf(letter) === -1) {
            lettersGuessed.push(letter);
            evaluateGuess(letter);
        }
        resetDisplay();
    }

    //find current word's letters and replace the blanks in display
    function evaluateGuess(letter) {
        //make an empty array to store word indexes in
        var indexes = [];

        //loop through word to find indexes of letter guessed
        for(var k = 0; k < animals[currentWordIndex].length; k++) {
            if(animals[currentWordIndex][k] === letter) {
                indexes.push(k);
            }
        }
        //if no matching indexes remove an attempt 
        if(indexes.length <= 0) {
            remainingAttempts--;
        } else {
            //loop through the word and replace the " _ " with letters
            for(var l = 0; l < indexes.length; l++) {
                guessingWord[indexes[l]] = " " + letter + " ";
            }
        }
    }

    //event listener for the keypress functionality
    document.onkeyup = function(event) {
        // var userKey = event.key;

        //insert the if statement for the END of the game to reset
        //use a defined global variable set to false initially
        
        //otherwise listen for keypresses between A and Z
        if(event.keyCode >= 65 && event.keyCode <= 90) {
            // console.log(userKey);
            makeGuess(event.key.toLowerCase());
        }
    }

    //TEMPORARY CALLED FUNCTIONS TO TEST FUNCTIONALITY
    startGame();
    resetDisplay();



    
    
    </script>
    
</body>
</html>